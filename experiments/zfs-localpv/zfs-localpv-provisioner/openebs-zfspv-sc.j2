---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-ext4"
allowVolumeExpansion: true
parameters:
  volblocksize: "{{ record_size }}"
  compression: "{{ compress }}" 
  dedup: "{{ de_dup }}"
  fstype: "ext4"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io
volumeBindingMode: WaitForFirstConsumer
## To create ZPOOL on only some of the node then mention node names in values with allowedTopologies 
##allowedTopologies:
##- matchLabelExpressions:
##  - key: kubernetes.io/hostname
##    values:


---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-xfs"
allowVolumeExpansion: true
parameters:
  volblocksize: "{{ vol_block_size }}"
  compression: "{{ compress }}" 
  dedup: "{{ de_dup }}"
  fstype: "xfs"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io
volumeBindingMode: WaitForFirstConsumer
## To create ZPOOL on only some of the node then mention node names in values with allowedTopologies 
##allowedTopologies:
##- matchLabelExpressions:
##  - key: kubernetes.io/hostname
##    values:


---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-zfs"
allowVolumeExpansion: true
parameters:
  recordsize: "{{ record_size }}"
  compression: "{{ compress }}" 
  dedup: "{{ de_dup }}"
  fstype: "zfs"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io
volumeBindingMode: WaitForFirstConsumer
## To create ZPOOL on only some of the node then mention node names in values with allowedTopologies 
##allowedTopologies:
##- matchLabelExpressions:
##  - key: kubernetes.io/hostname
##    values:


---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-btrfs"
parameters:
  volblocksize: "{{ record_size }}"
  compression: "{{ compress }}" 
  dedup: "{{ de_dup }}"
  fstype: "btrfs"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io
volumeBindingMode: WaitForFirstConsumer
## To create ZPOOL on only some of the node then mention node names in values with allowedTopologies 
##allowedTopologies:
##- matchLabelExpressions:
##  - key: kubernetes.io/hostname
##    values:

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-raw-block"
allowVolumeExpansion: true
parameters:
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-zfs-shared"
parameters:
  shared: "yes"
  fstype: "zfs"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-xfs-shared"
parameters:
  shared: "yes"
  fstype: "xfs"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-ext4-shared"
parameters:
  shared: "yes"
  fstype: "ext4"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: "{{ storage_class }}-btrfs-shared"
parameters:
  shared: "yes"
  fstype: "btrfs"
  poolname: "{{ pool_name }}"
provisioner: zfs.csi.openebs.io