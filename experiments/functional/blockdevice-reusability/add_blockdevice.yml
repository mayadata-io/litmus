---
    - name: Getting the Block-device from each node
      shell: >
        kubectl get bdc -n {{ operator_ns }} -l openebs.io/storage-pool-claim={{ spc_pool_name }} -o json | jq '.items[] | select(.spec.blockDeviceNodeAttributes.hostName=="{{ outer_item }}") | .spec.blockDeviceName' | tr "\"" " " 
      register: blockDevice

    - name: Add the block devices
      lineinfile:
        path: ./blockdevice-{{ outer_item }}.yml
        insertafter: ' blockDevices:'
        line: '        - blockDeviceName: {{ item }}'
      with_items:
          - "{{ blockDevice.stdout_lines }}"            
